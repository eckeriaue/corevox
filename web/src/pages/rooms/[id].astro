---
import RoomLayout from '@/layouts/RoomLayout.astro'
import RoomFullMesh from '@/components/room/RoomFullMesh.vue'

const { id: roomId } = Astro.params
const me = await Astro.session?.get('me')

if (!me || !roomId) {
  return Astro.redirect('/')
}
---
<RoomLayout>
    <RoomFullMesh
      client:only="vue"
      token={me.token}
      user={me.user}
      roomId={roomId}
    />
</RoomLayout>
