FROM rust:1.79-buster

RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
    && apt-get install -y nodejs git build-essential pkg-config libgtk-3-dev

WORKDIR /app

COPY package*.json ./
COPY src-tauri/Cargo.toml ./src-tauri/
RUN npm install

COPY . .

RUN cargo install tauri-cli

CMD ["npm", "run", "tauri", "dev"]
